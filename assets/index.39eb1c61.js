const y=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function l(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(e){if(e.ep)return;e.ep=!0;const o=l(e);fetch(e.href,o)}};y();const u={I:[[1,1,1,1],[0,0,0,0],[0,0,0,0],[0,0,0,0]],J:[[0,1,0],[0,1,0],[1,1,0]],L:[[1,0,0],[1,0,0],[1,1,0]],O:[[1,1],[1,1]],S:[[1,0,0],[1,1,0],[0,1,0]],SR:[[0,1,0],[1,1,0],[1,0,0]],T:[[0,1,0],[1,1,1],[0,0,0]]};const d=({row:r,col:c})=>new Array(r).fill(0).map(()=>new Array(c).fill(0)),k=()=>{const r=Object.keys(u);return r[Math.floor(Math.random()*r.length)]},s={gridSize:{row:20,col:10},speed:1e3},m=()=>({solidGrid:d(s.gridSize),currentGrid:d(s.gridSize),displayGrid:d(s.gridSize),clock:void 0,stopped:!0,score:0,currentBlock:{x:6,y:0,blockCode:k()}});let t=m();const g=r=>{const c=document.querySelector("#grid");!c||(c.innerHTML="",r.forEach((l,i)=>{const e=document.createElement("div");e.className="grid-row",e.id="R"+i,l.forEach((o,n)=>{const a=document.createElement("cell");a.textContent=String(o),a.id="R"+i+"C"+n,a.className="grid-cell",e.appendChild(a)}),c.appendChild(e)}))},p=()=>{const r=d(s.gridSize);u[t.currentBlock.blockCode].forEach((i,e)=>{t.currentBlock.y-e>=0&&i.forEach((o,n)=>{o&&(r[t.currentBlock.y-e][t.currentBlock.x-n]=t.currentBlock.blockCode)})});const l=d(s.gridSize).map((i,e)=>i.map((o,n)=>t.currentGrid[e][n]||t.solidGrid[e][n]));t.currentGrid=r,t.displayGrid=l,g(l)},h=()=>{console.log("tick"),t.score=t.score+1,t.currentBlock.y+=1,p()},f=()=>{var c;const r=(c=document.querySelector("#stop"))==null?void 0:c.classList;!r||(t.stopped?(clearInterval(t.clock),t.clock=void 0,r.add("active")):(t.clock=setInterval(h,s.speed),r.remove("active")))};window.onload=()=>{p(),f()};document.addEventListener("keyup",r=>{switch(r.key.toUpperCase()){case"S":t.stopped=!t.stopped,f();break}});
