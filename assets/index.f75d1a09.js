const m=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function i(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(e){if(e.ep)return;e.ep=!0;const o=i(e);fetch(e.href,o)}};m();const a={I:[[1,1,1,1],[0,0,0,0],[0,0,0,0],[0,0,0,0]],J:[[0,1,0],[0,1,0],[1,1,0]],L:[[1,0,0],[1,0,0],[1,1,0]],O:[[1,1],[1,1]],S:[[1,0,0],[1,1,0],[0,1,0]],SR:[[0,1,0],[1,1,0],[1,0,0]],T:[[0,1,0],[1,1,1],[0,0,0]]};const u=({row:c,col:r})=>new Array(c).fill(0).map(()=>new Array(r).fill(0)),g=()=>{const c=Object.keys(a);return c[Math.floor(Math.random()*c.length)]},d={gridSize:{row:20,col:10},speed:1e3},y=()=>({solidGrid:u(d.gridSize),currentGrid:u(d.gridSize),clock:void 0,stopped:!0,score:0,currentBlock:{x:6,y:0,blockCode:g()}});let t=y();const b=c=>{const r=document.querySelector("#grid");!r||(r.innerHTML="",c.forEach((i,s)=>{const e=document.createElement("div");e.className="grid-row",e.id="R"+s,i.forEach((o,n)=>{const l=document.createElement("cell");l.textContent=String(o),l.id="R"+s+"C"+n,l.className=`grid-cell ${o?`gc-${o}`:""}`,e.appendChild(l)}),r.appendChild(e)}))},f=()=>{const c=u(d.gridSize);a[t.currentBlock.blockCode].forEach((s,e)=>{const o=t.currentBlock.y-e;o>=0&&o<c.length&&s.forEach((n,l)=>{if(n){const p=t.currentBlock.x-l;c[o][p]=t.currentBlock.blockCode}})});const i=u(d.gridSize).map((s,e)=>s.map((o,n)=>c[e][n]||t.solidGrid[e][n]));t.currentGrid=c,b(i)},h=()=>{t.score=t.score+1,t.currentBlock.y+=1,f()},k=()=>{var r;const c=(r=document.querySelector("#stop"))==null?void 0:r.classList;!c||(t.stopped?(clearInterval(t.clock),t.clock=void 0,c.add("active")):(t.clock=setInterval(h,d.speed),c.remove("active")))};window.onload=()=>{f(),k()};document.addEventListener("keydown",c=>{switch(c.key){case"s":t.stopped=!t.stopped,k();break;case"ArrowLeft":{const r=t.currentBlock.x-1;a[t.currentBlock.blockCode].some(e=>e.some((o,n)=>o&&r-n<0))||(t.currentBlock.x=r,f());break}case"ArrowRight":{const r=t.currentBlock.x+1;a[t.currentBlock.blockCode].some(e=>e.some((o,n)=>o&&r-n>=d.gridSize.col))||(t.currentBlock.x=r,f());break}}});
